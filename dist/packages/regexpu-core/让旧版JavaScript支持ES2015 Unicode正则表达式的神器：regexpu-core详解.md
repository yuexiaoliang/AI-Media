---
title: "è®©æ—§ç‰ˆJavaScriptæ”¯æŒES2015 Unicodeæ­£åˆ™è¡¨è¾¾å¼çš„ç¥å™¨ï¼šregexpu-coreè¯¦è§£"
tags: ["JavaScript", "æ­£åˆ™è¡¨è¾¾å¼", "ç¼–ç¨‹", "å‰ç«¯å¼€å‘"]
desc: "æœ¬æ–‡è¯¦ç»†ä»‹ç»äº†å¦‚ä½•ä½¿ç”¨regexpu-coreå°†ES2015çš„Unicodeæ­£åˆ™è¡¨è¾¾å¼è½¬å†™ä¸ºå…¼å®¹æ—§ç‰ˆJavaScriptçš„å½¢å¼ï¼ŒåŠ©åŠ›å¼€å‘è€…å…‹æœå‰ç«¯å¼€å‘ä¸­çš„å…¼å®¹æ€§æŒ‘æˆ˜ã€‚"
pkgName: "regexpu-core"
---

# è®©æ—§ç‰ˆJavaScriptæ”¯æŒES2015 Unicodeæ­£åˆ™è¡¨è¾¾å¼çš„ç¥å™¨ï¼šregexpu-coreè¯¦è§£

åœ¨æ—¥å¸¸å‰ç«¯å¼€å‘ä¸­ï¼Œæˆ‘ä»¬æœ‰æ—¶ä¼šé‡åˆ°éœ€è¦åœ¨ä¸æ”¯æŒES2015åŠä»¥ä¸Šç‰ˆæœ¬çš„JavaScriptç¯å¢ƒä¸‹è¿è¡ŒUnicodeæ­£åˆ™è¡¨è¾¾å¼çš„æƒ…å†µã€‚è¿™æ—¶ï¼Œ`regexpu-core`åº“å°±æˆäº†æˆ‘ä»¬çš„æ•‘æ˜Ÿã€‚æœ¬æ–‡å°†è¯¦ç»†ä»‹ç»å¦‚ä½•ä½¿ç”¨è¿™ä¸ªå¼ºå¤§çš„åº“ï¼Œè®©æ—§ç‰ˆJavaScriptä¹Ÿèƒ½è½»æ¾è¿è¡ŒES2015 Unicodeæ­£åˆ™è¡¨è¾¾å¼ã€‚

## ğŸš€ ç®€ä»‹

`regexpu-core`æ˜¯ä¸€ä¸ªæºç è½¬è¯‘å™¨ï¼Œä½¿å¾—ä»Šå¤©çš„JavaScriptä»£ç ï¼ˆES5ï¼‰èƒ½å¤Ÿä½¿ç”¨ES2015ï¼ˆES6ï¼‰å¼•å…¥çš„Unicodeæ­£åˆ™è¡¨è¾¾å¼ã€‚

è¯¥åº“çš„æ ¸å¿ƒåŠŸèƒ½æ˜¯`rewritePattern(pattern, flag)`æ–¹æ³•ï¼Œå®ƒèƒ½å¤Ÿå°†ä½¿ç”¨ES2015ä¸­`u`æ ‡å¿—çš„æ­£åˆ™è¡¨è¾¾å¼è½¬å†™ä¸ºä¸ES5å…¼å®¹çš„ç­‰æ•ˆæ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼ã€‚

> ä»“åº“åœ°å€ï¼šhttps://github.com/mathiasbynens/regexpu-core

## ğŸ“š å®‰è£…

ä½¿ç”¨[npm](https://www.npmjs.com/)å°†`regexpu-core`ä½œä¸ºä¾èµ–å®‰è£…åˆ°ä½ çš„é¡¹ç›®ä¸­:

```bash
npm install regexpu-core --save
```

ç„¶åï¼Œåœ¨ä½ çš„ä»£ç ä¸­å¼•å…¥å®ƒï¼š

```javascript
const rewritePattern = require('regexpu-core');
```

## ğŸ› ï¸ API ä½¿ç”¨

ä¸»è¦å‡½æ•°`rewritePattern`æ¥å—ä¸€ä¸ªä»£è¡¨æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼çš„å­—ç¬¦ä¸²å’Œä¸€ä¸ªä»£è¡¨å…¶æ ‡å¿—çš„å­—ç¬¦ä¸²ï¼Œè¿”å›ä¸€ä¸ªä¸ES5å…¼å®¹çš„æ¨¡å¼ç‰ˆæœ¬ã€‚

### åŸºæœ¬ç”¨æ³•

```javascript
// åŸºæœ¬è½¬å†™ç¤ºä¾‹
rewritePattern('foo.bar', 'u', { unicodeFlag: "transform" });
// ç»“æœ: 'foo(?:[\\0-\\t\\x0B\\f\\x0E-\\u2027\\u202A-\\uD7FF\\uDC00-\\uFFFF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF])bar'
```

### æ”¯æŒ`u`æ ‡å¿—

```javascript
// å°†ä½¿ç”¨uæ ‡å¿—çš„æ­£åˆ™è¡¨è¾¾å¼è½¬å†™ä¸ºå…¼å®¹ES5çš„å½¢å¼
rewritePattern('\\u{1D306}-\\u{1D308}a-z', 'u', { unicodeFlag: "transform" });
// ç»“æœ: '(?:[a-z]|\\uD834[\\uDF06-\\uDF08])'
```

### å¤„ç†ç‰¹æ®Šæ ‡å¿—

```javascript
// åŒæ—¶ä½¿ç”¨'u'å’Œ'i'æ ‡å¿—
rewritePattern('[\\u{1D306}-\\u{1D308}a-z]', 'ui', { unicodeFlag: "transform" });
// ç»“æœ: '(?:[a-z\\u017F\\u212A]|\\uD834[\\uDF06-\\uDF08])'
```

### è¿›é˜¶é€‰é¡¹

`regexpu-core`æä¾›äº†å¤šä¸ªå¯é€‰å‚æ•°æ¥æ”¯æŒä¸åŒçš„æ­£åˆ™è¡¨è¾¾å¼ç‰¹æ€§ï¼Œå¦‚Unicodeå±æ€§è½¬ä¹‰ã€å‘½åæ•è·ç»„ã€ç‚¹å·å…¨è¦†ç›–(`s`æ ‡å¿—)ç­‰ã€‚

## ğŸ“‹ æ³¨æ„äº‹é¡¹

- ä½¿ç”¨`namedGroups: 'transform'`æ—¶ï¼Œ`regexpu-core`ä»…å¤„ç†è¯­æ³•ï¼›è¿è¡Œæ—¶éœ€è¦é¢å¤–çš„å°è£…æ¥å¡«å……`RegExp.prototype.match()`ç»“æœçš„`.groups`å±æ€§ã€‚
- ä¸æ”¯æŒè½¬æ¢åè§†æ–­è¨€ã€‚

é€šè¿‡æŒæ¡`regexpu-core`çš„ä½¿ç”¨æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¸ç‰ºç‰²ç°ä»£JavaScriptæ­£åˆ™è¡¨è¾¾å¼åŠŸèƒ½çš„æƒ…å†µä¸‹ï¼Œå¢å¼ºæ—§ç‰ˆJavaScriptç¯å¢ƒçš„å…¼å®¹æ€§ã€‚å¿«é€Ÿä¸Šæ‰‹è¿™ä¸€å¼ºå¤§çš„åº“ï¼Œä¸ºä½ çš„å‰ç«¯é¡¹ç›®å¸¦æ¥æ›´å¤šçš„å¯èƒ½ã€‚