---
title: åˆ©ç”¨ansi-regexè½»æ¾åŒ¹é…ANSIè½¬ä¹‰ç 
tags: [Nodejs, å‰ç«¯å·¥å…·, æ­£åˆ™è¡¨è¾¾å¼, ANSIç ]
desc: æ¢ç´¢å¦‚ä½•ä½¿ç”¨ansi-regexåº“åŒ¹é…æ§åˆ¶å°é¢œè‰²å’Œæ ¼å¼çš„ANSIè½¬ä¹‰ç ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚
pkgName: ansi-regex
---

# åˆ©ç”¨ansi-regexè½»æ¾åŒ¹é…ANSIè½¬ä¹‰ç 

åœ¨æ§åˆ¶å°è¾“å‡ºä¸­ç»å¸¸ä¼šä½¿ç”¨ANSIè½¬ä¹‰ç æ¥è®¾ç½®æ–‡å­—çš„é¢œè‰²å’Œæ ¼å¼ã€‚`ansi-regex` æ˜¯ä¸€ä¸ªä¸“é—¨ç”¨æ¥åŒ¹é…è¿™äº›ANSIè½¬ä¹‰ç çš„è½»é‡çº§npmåŒ…ã€‚æœ¬æ–‡å°†è¯¦ç»†è®²è§£å¦‚ä½•åœ¨é¡¹ç›®ä¸­å®‰è£…å’Œä½¿ç”¨å®ƒã€‚

## ğŸ“¦ å®‰è£…æŒ‡å—

åœ¨ç»§ç»­ä¹‹å‰ï¼Œè¯·ç¡®ä¿ä½ çš„é¡¹ç›®ä¸­å·²ç»å®‰è£…äº†Node.jså’Œnpmã€‚ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£… `ansi-regex`ï¼š

``` shell
$ npm install ansi-regex
```

å®‰è£…å®Œæˆåï¼Œä½ å°±å¯ä»¥åœ¨ä½ çš„Node.jsé¡¹ç›®ä¸­ä½¿ç”¨å®ƒäº†ã€‚

## ğŸ› ï¸ ä½¿ç”¨æ–¹æ³•

`ansi-regex` çš„åŸºæœ¬ç”¨æ³•å¾ˆç®€å•ã€‚å®ƒæä¾›äº†ä¸€ä¸ªå‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªå¯ä»¥åŒ¹é…ANSIè½¬ä¹‰ç çš„æ­£åˆ™è¡¨è¾¾å¼ã€‚ä¸‹é¢æ˜¯ä¸€äº›åŸºæœ¬çš„ä½¿ç”¨ç¤ºä¾‹ï¼š

``` javascript
import ansiRegex from 'ansi-regex';

// æµ‹è¯•æ˜¯å¦åŒ…å«ANSIè½¬ä¹‰ç 
console.log(ansiRegex().test('\u001B[4mcake\u001B[0m')); //=> true

// å½“å­—ç¬¦ä¸²ä¸åŒ…å«ANSIè½¬ä¹‰ç æ—¶
console.log(ansiRegex().test('cake')); //=> false

// åŒ¹é…å¹¶è·å–æ‰€æœ‰çš„ANSIè½¬ä¹‰ç 
console.log('\u001B[4mcake\u001B[0m'.match(ansiRegex()));
//=> ['\u001B[4m', '\u001B[0m']

// åŒ¹é…å¹¶ä»…è·å–ç¬¬ä¸€ä¸ªANSIè½¬ä¹‰ç 
console.log('\u001B[4mcake\u001B[0m'.match(ansiRegex({onlyFirst: true})));
//=> ['\u001B[4m']

// åŒ¹é…åŒ…å«å¤šç§ANSIè½¬ä¹‰ç çš„å¤æ‚å­—ç¬¦ä¸²
console.log('\u001B]8;;https://github.com\u0007click\u001B]8;;\u0007'.match(ansiRegex()));
//=> ['\u001B]8;;https://github.com\u0007', '\u001B]8;;\u0007']
```

## ğŸ” API ä½¿ç”¨è¯¦ç»†

ä½¿ç”¨ `ansiRegex(options?)` å¯ä»¥å¾—åˆ°ä¸€ä¸ªç”¨äºåŒ¹é…ANSIè½¬ä¹‰ç çš„æ­£åˆ™è¡¨è¾¾å¼ã€‚

### å¯é€‰å‚æ•° `options`

- ç±»å‹ï¼š`object`

#### onlyFirst

- ç±»å‹ï¼š`boolean`  
- é»˜è®¤å€¼ï¼š`false` ï¼ˆåŒ¹é…å­—ç¬¦ä¸²ä¸­çš„æ‰€æœ‰ANSIè½¬ä¹‰ç ï¼‰

å¦‚æœåªæƒ³åŒ¹é…å­—ç¬¦ä¸²ä¸­çš„ç¬¬ä¸€ä¸ªANSIè½¬ä¹‰ç ï¼Œè¯·è®¾ç½® `onlyFirst` ä¸º `true`ã€‚

## æ€»ç»“

`ansi-regex` æ˜¯å‰ç«¯å¼€å‘è€…å’ŒNode.jså¼€å‘è€…åœ¨å®šåˆ¶æ§åˆ¶å°è¾“å‡ºæ—¶çš„å¾—åŠ›åŠ©æ‰‹ã€‚é€šè¿‡ä½¿ç”¨è¿™ä¸ªå·¥å…·ï¼Œå¯ä»¥è½»æ¾è¯†åˆ«å’Œæ“ä½œåŒ…å«ANSIè½¬ä¹‰ç çš„å­—ç¬¦ä¸²ï¼Œä»è€Œåˆ›å»ºæ›´ä¸°å¯Œçš„ç”¨æˆ·ç•Œé¢ã€‚

> ä»“åº“åœ°å€ï¼šhttps://github.com/chalk/ansi-regex