---
title: "Node.jsä¸­çš„é«˜æ•ˆé€šé…ç¬¦åŒ¹é…ï¼šæ·±å…¥micromatchåº“"
tags: ["å‰ç«¯å¼€å‘","Nodejs","é€šé…ç¬¦åŒ¹é…","æ­£åˆ™è¡¨è¾¾å¼","ç¼–ç¨‹"]
desc: "åœ¨Node.jså¼€å‘ä¸­ç»å¸¸éœ€è¦å¤„ç†æ–‡ä»¶åŒ¹é…é—®é¢˜ï¼Œmicromatchåº“æä¾›äº†ä¸€ç§çµæ´»è€Œå¼ºå¤§çš„æ–¹æ³•æ¥ä½¿ç”¨é€šé…ç¬¦è¿›è¡ŒåŒ¹é…ã€‚æœ¬æ–‡å°†æ·±å…¥è®²è§£å¦‚ä½•åˆ©ç”¨micromatchæ¥ä¼˜åŒ–ä½ çš„æ–‡ä»¶æŸ¥æ‰¾æ“ä½œã€‚"
pkgName: "micromatch"
---

# Node.jsä¸­çš„é«˜æ•ˆé€šé…ç¬¦åŒ¹é…ï¼šæ·±å…¥micromatchåº“

åœ¨Node.jsçš„ä¸–ç•Œä¸­ï¼Œé€šé…ç¬¦åŒ¹é…å¯¹äºå¤„ç†æ–‡ä»¶å’Œç›®å½•è‡³å…³é‡è¦ã€‚`micromatch`åº“ä»¥å…¶å¿«é€Ÿã€ç²¾ç¡®çš„åŒ¹é…ç‰¹æ€§åœ¨ä¼—å¤šå¼€å‘è€…ä¸­å¹¿å—æ¬¢è¿ã€‚ä»é«˜çº§çš„é€šé…ç¬¦åŠŸèƒ½åˆ°ä¸Bash 4.3è§„èŒƒçš„ä¸€è‡´æ€§ï¼Œ`micromatch`è®©æ–‡ä»¶åŒ¹é…å˜å¾—ç®€å•è€Œå¯Œæœ‰è¡¨ç°åŠ›ã€‚æœ¬æ–‡å°†é€šè¿‡ä¸°å¯Œçš„ä»£ç ç¤ºä¾‹ï¼Œå¸¦ä½ æ·±å…¥äº†è§£å¦‚ä½•å·§å¦™åœ°ä½¿ç”¨`micromatch`æ¥æå‡ä½ çš„å¼€å‘æ•ˆç‡ã€‚

## ğŸ“¦ å®‰è£…å’Œå¿«é€Ÿå¼€å§‹

åœ¨å¼€å§‹ä¹‹å‰ï¼Œä½ éœ€è¦ç¡®ä¿ä½ çš„Node.jsç¯å¢ƒå·²ç»å®‰è£…ã€‚æ‰“å¼€ä½ çš„ç»ˆç«¯ï¼Œå¹¶ä½¿ç”¨npmæ¥å®‰è£…`micromatch`ï¼š

```sh
$ npm install --save micromatch
```

å®‰è£…å®Œæ¯•åï¼Œä½ å°±å¯ä»¥åœ¨ä½ çš„é¡¹ç›®ä¸­ä½¿ç”¨`micromatch`è¿›è¡ŒåŒ¹é…æ“ä½œäº†ã€‚ä¸‹é¢æ˜¯å¦‚ä½•å¼•å…¥å’Œä½¿ç”¨`micromatch`çš„ä¸€ä¸ªç®€å•ç¤ºä¾‹ï¼š

```javascript
const micromatch = require('micromatch');
// ä½¿ç”¨micromatchæ¥åŒ¹é…æ–‡ä»¶
const matches = micromatch(['foo.txt', 'bar.js', 'baz.jsx'], '*.js');
console.log(matches); // ['bar.js']
```

åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬åŒ¹é…äº†æ‰©å±•åä¸º`.js`çš„æ–‡ä»¶ã€‚`micromatch`è¿”å›äº†ä¸€ä¸ªåŒ…å«æ‰€æœ‰åŒ¹é…é¡¹çš„æ•°ç»„ã€‚

## ğŸŒŸ ç‰¹æ€§æ­ç§˜

`micromatch` çš„å¼ºå¤§åœ¨äºå…¶æ”¯æŒå¤šç§å¤æ‚çš„åŒ¹é…æ¨¡å¼ï¼Œè¿™äº›æ¨¡å¼ä¸ºä½ çš„æ–‡ä»¶æŸ¥æ‰¾ç­–ç•¥æä¾›äº†æå¤§çš„çµæ´»æ€§ã€‚

### åŸºæœ¬é€šé…ç¬¦

è®©æˆ‘ä»¬ä»ä¸€äº›åŸºæœ¬çš„é€šé…ç¬¦å¼€å§‹ï¼š

- `*` åŒ¹é…ä»»ä½•å­—ç¬¦ï¼Œé™¤äº†è·¯å¾„åˆ†éš”ç¬¦
- `?` åŒ¹é…å•ä¸ªå­—ç¬¦
- `**` åŒ¹é…ä»»ä½•å­—ç¬¦ï¼ŒåŒ…æ‹¬è·¯å¾„åˆ†éš”ç¬¦ï¼Œé€šå¸¸ç”¨äºåŒ¹é…å¤šä¸ªç›®å½•å±‚çº§

```javascript
// åŒ¹é…ä»»ä½•ä»¥.jsç»“å°¾çš„æ–‡ä»¶
console.log(micromatch(['test.js', 'test.txt'], '*.js')); //=> ['test.js']

// ä½¿ç”¨å•ä¸ª?é€šé…ç¬¦åŒ¹é…å•ä¸ªå­—ç¬¦
console.log(micromatch(['a.js', 'ab.js', 'abc.js'], 'a?.js')); //=> ['ab.js']

// ä½¿ç”¨**åŒ¹é…ä»»ä½•æ·±åº¦çš„ç›®å½•
console.log(micromatch(['src/js/test.js', 'src/test.js'], 'src/**/*.js')); //=> ['src/js/test.js', 'src/test.js']
```

### è´ŸåŒ¹é…

`micromatch` ä¹Ÿæ”¯æŒè´ŸåŒ¹é…ï¼Œå³æ’é™¤æŸäº›æ–‡ä»¶ï¼š

```javascript
// æ’é™¤ä»¥"b"å¼€å¤´çš„æ–‡ä»¶
console.log(micromatch(['foo.js', 'bar.js'], ['*.js', '!b*.js'])); //=> ['foo.js']
```

### é«˜çº§åŒ¹é…æ¨¡å¼

`micromatch` è¿˜æä¾›é«˜çº§åŒ¹é…æ¨¡å¼ï¼Œå…è®¸ä½ æ›´ç²¾ç»†åœ°æ§åˆ¶åŒ¹é…è¿‡ç¨‹ï¼š

- `{}` ç”¨äºåˆ›å»ºä¸€ä¸ªç”±é€—å·åˆ†éš”çš„åŒ¹é…åˆ—è¡¨
- `!()` ç”¨äºåŒ¹é…ä»»ä½•ä¸æ‹¬å·å†…æ¨¡å¼ä¸åŒ¹é…çš„å­—ç¬¦ä¸²
- `?(pattern)` åŒ¹é…é›¶æ¬¡æˆ–ä¸€æ¬¡ç»™å®šçš„æ¨¡å¼

```javascript
// ä½¿ç”¨{}è¿›è¡Œåˆ—è¡¨åŒ¹é…
console.log(micromatch(['foo.js', 'foo.txt'], '*.+(js|txt)')); //=> ['foo.js', 'foo.txt']

// ä½¿ç”¨!()è¿›è¡Œå¦å®šåŒ¹é…
console.log(micromatch(['foo.js', 'bar.js'], '*!(foo).js')); //=> ['bar.js']

// ä½¿ç”¨?()åŒ¹é…é›¶æ¬¡æˆ–ä¸€æ¬¡
console.log(micromatch(['foo.js', 'foofoo.js'], 'foo?(foo).js')); //=> ['foo.js', 'foofoo.js']
```

## ğŸ”„ ä»minimatchæˆ–multimatchåˆ‡æ¢

å¦‚æœä½ ä¹‹å‰ä½¿ç”¨è¿‡`minimatch`æˆ–`multimatch`ï¼Œåˆ‡æ¢åˆ°`micromatch`å°†ä¼šéå¸¸ç®€å•ã€‚ä½ åŸºæœ¬ä¸Šåªéœ€æ›¿æ¢å‡½æ•°è°ƒç”¨çš„æ–¹å¼ã€‚ä¾‹å¦‚:

```javascript
// minimatchç¤ºä¾‹
minimatch('foo.js', '*.js'); // è¿”å› true æˆ– false

// micromatchç­‰ä»·ç¤ºä¾‹ä½¿ç”¨.isMatch
micromatch.isMatch('foo.js', '*.js'); // è¿”å› true æˆ– false
```

## ğŸš€ æ€§èƒ½æµ‹è¯•

`micromatch`çš„å¦ä¸€ä¸ªäº®ç‚¹æ˜¯å…¶æ€§èƒ½ã€‚é€šè¿‡å¤§é‡çš„å•å…ƒæµ‹è¯•å’ŒåŸºå‡†æµ‹è¯•ï¼Œ`micromatch`çš„åŒ¹é…æ•ˆç‡å§‹ç»ˆä¿æŒåœ¨è¡Œä¸šé¢†å…ˆæ°´å¹³ã€‚å³ä½¿åœ¨å¤„ç†å¤§è§„æ¨¡æ–‡ä»¶ç³»ç»Ÿæ—¶ï¼Œ`micromatch`ä¹Ÿèƒ½æä¾›ç¨³å®šå¯é çš„åŒ¹é…é€Ÿåº¦ã€‚

é€šè¿‡ä»¥ä¸‹å‘½ä»¤ï¼Œä½ å¯ä»¥åœ¨è‡ªå·±çš„é¡¹ç›®ä¸­è¿è¡Œæ€§èƒ½æµ‹è¯•ï¼š

```sh
$ npm run bench
```

## æ€»ç»“

`micromatch`ä¸ä»…ä»…æ˜¯ä¸€ä¸ªç®€å•çš„åº“ï¼Œå®ƒæä¾›äº†ä¸€å¥—å®Œæ•´è€Œå¼ºå¤§çš„å·¥å…·ï¼Œä½¿å¾—é€šé…ç¬¦åŒ¹é…å˜å¾—æ—¢ç®€å•åˆç²¾ç¡®ã€‚æ— è®ºä½ æ˜¯åœ¨æ„å»ºæ„å»ºç®¡é“ï¼Œè¿˜æ˜¯ç®€å•åœ°æŸ¥æ‰¾æ–‡ä»¶ï¼Œ`micromatch`éƒ½æ˜¯ä¸€ä¸ªéå¸¸å€¼å¾—å°è¯•çš„å·¥å…·ã€‚

å¸Œæœ›æœ¬æ–‡èƒ½å¸®åŠ©ä½ æ·±å…¥ç†è§£`micromatch`ï¼Œå¹¶åœ¨å®é™…é¡¹ç›®ä¸­å‘æŒ¥å‡ºå®ƒçš„æœ€å¤§æ½œåŠ›ã€‚

> ä»“åº“åœ°å€ï¼šhttps://github.com/micromatch/micromatch