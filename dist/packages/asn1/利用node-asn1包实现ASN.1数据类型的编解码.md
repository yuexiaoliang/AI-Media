---
title: åˆ©ç”¨node-asn1åŒ…å®ç°ASN.1æ•°æ®ç±»å‹çš„ç¼–è§£ç 
tags: [å‰ç«¯, ç¼–ç¨‹, Node.js, ASN.1, ç¼–è§£ç ]
desc: æœ¬æ–‡è¯¦ç»†è®²è§£å¦‚ä½•ä½¿ç”¨node-asn1åº“æ¥åœ¨Node.jsç¯å¢ƒä¸‹å¯¹ASN.1æ•°æ®ç±»å‹è¿›è¡Œç¼–ç ä¸è§£ç æ“ä½œã€‚
pkgName: asn1
---

# åˆ©ç”¨node-asn1åŒ…å®ç°ASN.1æ•°æ®ç±»å‹çš„ç¼–è§£ç 

ASN.1(Abstract Syntax Notation One) æ˜¯ä¸€ç§æŠ½è±¡çš„è¯­æ³•è¡¨ç¤ºæ–¹æ³•ï¼Œå¹¿æ³›ç”¨äºè·¨å¹³å°æ•°æ®äº¤æ¢æ ¼å¼çš„ç¼–ç å’Œè§£ç ã€‚åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°†æŒ‡å¯¼ä½ å¦‚ä½•ä½¿ç”¨`node-asn1`åŒ…åœ¨Node.jsä¸­è½»æ¾å®ç°è¿™ä¸€åŠŸèƒ½ã€‚

## ğŸ“˜ å¦‚ä½•å®‰è£…node-asn1

åœ¨å¼€å§‹ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦ç¡®ä¿ä½ å·²ç»å®‰è£…äº†node-asn1åŒ…ã€‚é€šè¿‡ä»¥ä¸‹NPMå‘½ä»¤å¯ä»¥å¿«é€Ÿå®‰è£…ï¼š

```sh
npm install asn1
```

å®‰è£…å®Œæˆåï¼Œä½ å¯ä»¥é€šè¿‡`require`è°ƒç”¨æ¥åœ¨ä½ çš„Node.jsé¡¹ç›®ä¸­ä½¿ç”¨å®ƒã€‚

## ğŸš€ è§£ç ASN.1æ•°æ®æµ

ä¸‹é¢çš„ä»£ç å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨`node-asn1`åº“å»è§£æåŒ…å«ä¸€ä¸ªå¸ƒå°”å€¼çš„ASN.1åºåˆ—ã€‚

```javascript
var Ber = require('asn1').Ber;

var reader = new Ber.Reader(Buffer.from([0x30, 0x03, 0x01, 0x01, 0xff]));

reader.readSequence();
console.log('Sequence len: ' + reader.length);
if (reader.peek() === Ber.Boolean) {
  console.log(reader.readBoolean()); // è¿™é‡Œå°†è¾“å‡º true
}
```

åœ¨ä¸Šé¢çš„ä»£ç å—ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆå¯¼å…¥`asn1`åŒ…å¹¶ä½¿ç”¨å…¶ä¸­çš„`Ber.Reader`æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„é˜…è¯»å™¨å®ä¾‹ã€‚éšåï¼Œæˆ‘ä»¬è¯»å–äº†ä¸€ä¸ªé¢„ç½®çš„ASN.1ç¼–ç å¥½çš„åºåˆ—ï¼Œåˆ©ç”¨`readSequence`æ–¹æ³•è¿›è¡Œåºåˆ—åŒ–è¯»å–ï¼Œå¹¶åˆ¤æ–­ä¸‹ä¸€ä¸ªå³å°†è¢«è¯»å–çš„å…ƒç´ æ˜¯å¦ä¸ºå¸ƒå°”ç±»å‹ã€‚

## ğŸ¨ ç¼–ç æ•°æ®æˆASN.1æ ¼å¼

ç¼–ç æ•°æ®ä¸ºASN.1æ ¼å¼ä¹Ÿéå¸¸ç®€å•ã€‚ä»¥ä¸‹ç¤ºä¾‹æ¼”ç¤ºäº†å¦‚ä½•ç¼–ç ä¸€ä¸ªå«æœ‰å¸ƒå°”å€¼çš„ASN.1åºåˆ—ã€‚

```javascript
var Ber = require('asn1').Ber;

var writer = new Ber.Writer();

writer.startSequence();
writer.writeBoolean(true);
writer.endSequence();

console.log(writer.buffer); // <Buffer 30 03 01 01 ff>
```

åœ¨è¿™æ®µä»£ç ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†`Ber.Writer`çš„ä¸€ä¸ªå®ä¾‹å¹¶ç”¨å®ƒæ¥æ„é€ ä¸€ä¸ªæ–°çš„åºåˆ—ã€‚`startSequence`å¼€å§‹ä¸€ä¸ªåºåˆ—ï¼Œ`writeBoolean`åœ¨åºåˆ—ä¸­æ’å…¥äº†ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œæœ€åè°ƒç”¨`endSequence`æ¥ç»“æŸè¿™ä¸ªåºåˆ—ã€‚ç”Ÿæˆçš„å­—èŠ‚ç¼“å­˜åŒºï¼ˆbufferï¼‰è¢«æ‰“å°å‡ºæ¥ï¼Œä½ å¯ä»¥çœ‹åˆ°å®ƒä¸è§£ç ç¤ºä¾‹çš„è¾“å…¥æ˜¯å®Œå…¨å¯¹åº”çš„ã€‚

## ğŸ“¦ ä¸ºä»€ä¹ˆé€‰æ‹©node-asn1

é€‰æ‹©`node-asn1`åº“è¿›è¡ŒASN.1æ•°æ®ç±»å‹çš„ç¼–è§£ç æœ‰å¾ˆå¤šå¥½å¤„ï¼š
- çº¯JavaScriptç¼–å†™ï¼Œæ— éœ€ä¾èµ–æœ¬åœ°æ¨¡å—ã€‚
- å¯¹BERç¼–ç çš„æ”¯æŒï¼Œå¹¶æœ‰å¯èƒ½æœªæ¥æ”¯æŒDERã€‚
- ä»£ç æ¸…æ™°ï¼Œæ˜“äºç†è§£å’Œä½¿ç”¨ã€‚
- é€‚ç”¨äºéœ€è¦ASN.1æ•°æ®å¤„ç†çš„å¤šç§åœºåˆï¼Œä¾‹å¦‚ï¼šè¯ä¹¦å¤„ç†ã€é€šä¿¡åè®®ç­‰ã€‚

> ä»“åº“åœ°å€ï¼šhttps://github.com/joyent/node-asn1

ä½¿ç”¨`node-asn1`åº“ä½¿å¾—å¤„ç†ASN.1å˜å¾—è½»æ¾ä¸”é«˜æ•ˆã€‚å¸Œæœ›æœ¬æŒ‡å—èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°åœ¨Node.jsç¯å¢ƒä¸‹å·¥ä½œä¸ASN.1æ•°æ®äº¤äº’ã€‚ä¸è¦å¿˜äº†ï¼Œå¦‚æœåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°ä»»ä½•é—®é¢˜ï¼Œå¯ä»¥è®¿é—®å®˜æ–¹çš„GitHubä»“åº“æŸ¥æ‰¾è§£å†³æ–¹æ¡ˆæˆ–æäº¤æ–°çš„é—®é¢˜ã€‚